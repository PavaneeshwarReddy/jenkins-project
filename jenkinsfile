pipeline {
    agent any
    triggers{
        pollSCM('H/5 * * * *')
    }
    stages {
        stage("Checkout to Git Repository") {
            steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/main']],
                    userRemoteConfigs: [[url: 'https://github.com/PavaneeshwarReddy/jenkins-project.git']]
                ])
            }
        }
        stage("Build") {
            agent {
                docker {
                    image 'node:22-alpine3.19'
                    reuseNode true
                }
            }
            steps {
                echo "This is Build stage"
                echo "npm --version"
            }
        }
        stage("Test") {
            steps {
                echo "This is Test stage"
            }
        }
        stage("Package") {
            agent {
                docker {
                    image 'docker:27.0.1-cli'
                    reuseNode true
                }
            }
            steps {
                echo "This is Package stage"
                echo "docker --version"
            }
        }
        stage("deploy") {
            steps {
                echo "This is a Deploy stage"
            }
        }
    }
}
